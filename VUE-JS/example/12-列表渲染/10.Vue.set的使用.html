<!DOCTYPE html>
<html>

<head>
    <title>Vue.set的使用</title>
    <script src="../../js/vue.js"></script>
</head>


<body>
    <div id="root">
        <h2>学校名称:{{name}}</h2>
        <h2>学校地址: {{address}}</h2>
        <h2>学生姓名：{{student.name}}</h2>
        <h2 v-if="student.sex">学生性别：{{student.sex}}</h2>
        <h2>学生领导:{{leader}}</h2>
        <button @click="addStudentLeader">添加学生领导数据</button>
        <button @click="addStudentSex">添加学生性别</button>
        <h2>学生年龄：真实{{student.age.rAge}},对外{{student.age.sAge}}</h2>

        <h2>朋友们</h2>
        <ul>
            <li v-for="(f,index) of student.friends" :key="index">
                {{f.name}}--{{f.age}}
            </li>
        </ul>
    </div>
</body>
<script type="text/javascript">
    // 如果页面初始化以后想要给vue实例的data对象增加一个属性,不能直接vm.<attr>=<value>
    // 这样不是响应式的,必须使用Vue.set(this._data.<obj>,'<attr>','<value>');
    Vue.config.productionTip = false; //阻止vue在启动时生成生产提示
    var vm = new Vue({
        el: "#root",
        data: {
            name:"上硅谷",
            address:"北京",
            student:{
                name: 'Tom',
                age:{
                    realAge:40,
                    revealAge:29,
                },
                friends:[
                    {name:'Jerry',age:'20'},
                    {name:'Tony',age:'33'},
                ]
            },
        },
        methods:{
                addStudentLeader(){
                    Vue.set(this,leader,"cbf");
                },
                addStudentSex(){
                    // Vue.set(this.student,'sex','男');
                    this.$set(this.student,'sex','男');
                }
            }
    });
</script>

</html>